<!doctype html>
<html lang="ar" dir="rtl">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Ù„Ø¹Ø¨Ø© Ø§Ù„ØªÙ‚Ø· Ø¨Ø³Ø±Ø¹Ø©</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Arial', sans-serif;
                background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
                background-size: 400% 400%;
                animation: gradientMove 10s ease infinite;
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
            }

            @keyframes gradientMove {
                0% {
                    background-position: 0% 50%;
                }
                50% {
                    background-position: 100% 50%;
                }
                100% {
                    background-position: 0% 50%;
                }
            }

            .game-container {
                background: rgba(255, 255, 255, 0.15);
                backdrop-filter: blur(15px);
                border-radius: 25px;
                padding: 30px;
                max-width: 900px;
                width: 95%;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
                text-align: center;
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            .game-title {
                font-size: 3rem;
                margin-bottom: 30px;
                text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
                color: #fff;
                font-weight: bold;
            }

            .screen {
                display: none;
                animation: fadeIn 0.6s ease-in;
            }

            .screen.active {
                display: block;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* Ø´Ø§Ø´Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„Ø¹Ø¨Ø© */
            .games-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 25px;
                margin: 40px 0;
            }

            .game-option {
                background: linear-gradient(135deg, #ffffff, #f8f9fa);
                color: #333;
                border: none;
                border-radius: 20px;
                padding: 30px 20px;
                cursor: pointer;
                transition: all 0.4s ease;
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
                font-size: 1.1rem;
                font-weight: bold;
            }

            .game-option:hover {
                transform: translateY(-8px);
                box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
                background: linear-gradient(135deg, #fff, #fff);
            }

            .game-icon {
                font-size: 4rem;
                margin-bottom: 15px;
                display: block;
            }

            .game-option h3 {
                font-size: 1.4rem;
                margin-bottom: 10px;
                color: #2c3e50;
            }

            .game-option p {
                color: #7f8c8d;
                font-size: 1rem;
            }

            /* Ø´Ø§Ø´Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¤Ù‚Øª */
            .timer-section h2 {
                font-size: 2rem;
                margin-bottom: 30px;
                color: #fff;
            }

            .timer-options {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 20px;
                margin: 40px 0;
            }

            .timer-btn {
                background: linear-gradient(135deg, #4caf50, #45a049);
                color: white;
                border: none;
                padding: 18px 30px;
                border-radius: 30px;
                cursor: pointer;
                font-size: 1.2rem;
                font-weight: bold;
                transition: all 0.3s ease;
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
                min-width: 140px;
            }

            .timer-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
            }

            .timer-btn.selected {
                background: linear-gradient(135deg, #ff6b6b, #ff5252);
                box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
                transform: translateY(-3px);
            }

            .main-btn {
                background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
                color: white;
                border: none;
                padding: 18px 35px;
                border-radius: 30px;
                cursor: pointer;
                font-size: 1.3rem;
                font-weight: bold;
                margin: 20px 15px;
                transition: all 0.3s ease;
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            }

            .main-btn:hover {
                transform: translateY(-4px);
                box-shadow: 0 12px 35px rgba(0, 0, 0, 0.25);
            }

            .back-btn {
                background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            }

            /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨ */
            .game-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                background: rgba(255, 255, 255, 0.2);
                padding: 25px;
                border-radius: 20px;
                margin-bottom: 30px;
                flex-wrap: wrap;
                gap: 20px;
            }

            .timer-display {
                font-size: 3rem;
                font-weight: bold;
                color: #ffd700;
                text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.4);
                min-width: 120px;
                background: rgba(0, 0, 0, 0.2);
                padding: 10px 20px;
                border-radius: 15px;
            }

            .score-display,
            .question-display {
                font-size: 1.4rem;
                font-weight: bold;
                background: rgba(255, 255, 255, 0.2);
                padding: 10px 20px;
                border-radius: 15px;
            }

            .question-area {
                background: rgba(255, 255, 255, 0.95);
                color: #333;
                padding: 40px 30px;
                border-radius: 25px;
                margin-bottom: 30px;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            }

            .question-text {
                font-size: 1.8rem;
                margin-bottom: 25px;
                color: #2c3e50;
                font-weight: bold;
            }

            .target-display {
                font-size: 6rem;
                margin: 25px 0;
                padding: 30px;
                background: linear-gradient(135deg, #f8f9fa, #e9ecef);
                border-radius: 20px;
                border: 4px solid #dee2e6;
                display: inline-block;
                min-width: 150px;
                min-height: 150px;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            }

            .options-container {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 25px;
                max-width: 700px;
                margin: 0 auto;
            }

            .option-btn {
                background: linear-gradient(135deg, #ffffff, #f8f9fa);
                color: #333;
                border: 4px solid #dee2e6;
                border-radius: 20px;
                padding: 25px;
                cursor: pointer;
                font-size: 3rem;
                transition: all 0.3s ease;
                min-height: 120px;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
                font-weight: bold;
            }

            .option-btn:hover {
                transform: scale(1.05);
                border-color: #4ecdc4;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            }

            .option-btn.correct {
                background: linear-gradient(135deg, #4caf50, #66bb6a);
                color: white;
                border-color: #4caf50;
                animation: correctBounce 0.8s ease;
            }

            .option-btn.wrong {
                background: linear-gradient(135deg, #f44336, #ef5350);
                color: white;
                border-color: #f44336;
                animation: wrongShake 0.8s ease;
            }

            @keyframes correctBounce {
                0%,
                20%,
                60%,
                100% {
                    transform: translateY(0) scale(1);
                }
                40% {
                    transform: translateY(-15px) scale(1.1);
                }
                80% {
                    transform: translateY(-7px) scale(1.05);
                }
            }

            @keyframes wrongShake {
                0%,
                100% {
                    transform: translateX(0);
                }
                10%,
                30%,
                50%,
                70%,
                90% {
                    transform: translateX(-8px);
                }
                20%,
                40%,
                60%,
                80% {
                    transform: translateX(8px);
                }
            }

            /* Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
            .results-screen {
                text-align: center;
                padding: 40px 20px;
            }

            .results-title {
                font-size: 3.5rem;
                margin-bottom: 30px;
                color: #ffd700;
                text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
            }

            .results-details {
                font-size: 1.5rem;
                margin: 20px 0;
                background: rgba(255, 255, 255, 0.2);
                padding: 20px;
                border-radius: 15px;
                backdrop-filter: blur(10px);
            }

            .celebration {
                font-size: 5rem;
                margin: 30px 0;
                animation: celebrationSpin 3s infinite;
            }

            @keyframes celebrationSpin {
                0% {
                    transform: scale(1) rotate(0deg);
                }
                25% {
                    transform: scale(1.2) rotate(90deg);
                }
                50% {
                    transform: scale(1.1) rotate(180deg);
                }
                75% {
                    transform: scale(1.2) rotate(270deg);
                }
                100% {
                    transform: scale(1) rotate(360deg);
                }
            }

            /* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ */
            @media (max-width: 768px) {
                .game-title {
                    font-size: 2.2rem;
                }
                .timer-display {
                    font-size: 2.2rem;
                }
                .target-display {
                    font-size: 4rem;
                    min-width: 120px;
                    min-height: 120px;
                }
                .option-btn {
                    font-size: 2.2rem;
                    padding: 20px;
                    min-height: 100px;
                }
                .game-header {
                    flex-direction: column;
                    text-align: center;
                }
                .games-grid {
                    grid-template-columns: 1fr;
                }
            }

            @media (max-width: 480px) {
                .game-container {
                    padding: 20px;
                }
                .target-display {
                    font-size: 3rem;
                }
                .option-btn {
                    font-size: 2rem;
                }
            }
        </style>
    </head>
    <body>
        <div class="game-container">
            <h1 class="game-title">ğŸ¯ Ù„Ø¹Ø¨Ø© Ø§Ù„ØªÙ‚Ø· Ø¨Ø³Ø±Ø¹Ø©</h1>

            <!-- Ø´Ø§Ø´Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„Ø¹Ø¨Ø© -->
            <div id="gameSelectionScreen" class="screen active">
                <h2 style="margin-bottom: 30px; font-size: 2rem">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù„Ø¹Ø¨Ø©:</h2>
                <div class="games-grid">
                    <button class="game-option" onclick="selectGameType('colors')">
                        <span class="game-icon">ğŸŒˆ</span>
                        <h3>Ø§Ù„Ø£Ù„ÙˆØ§Ù†</h3>
                        <p>ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ØªØ´Ø§Ø¨Ù‡Ø©</p>
                    </button>

                    <button class="game-option" onclick="selectGameType('letters')">
                        <span class="game-icon">ğŸ”¤</span>
                        <h3>Ø§Ù„Ø­Ø±ÙˆÙ</h3>
                        <p>ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</p>
                    </button>

                    <button class="game-option" onclick="selectGameType('numbers')">
                        <span class="game-icon">ğŸ”¢</span>
                        <h3>Ø§Ù„Ø£Ø±Ù‚Ø§Ù…</h3>
                        <p>ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙˆØ§Ù„Ø¹Ø¯Ø¯</p>
                    </button>

                    <button class="game-option" onclick="selectGameType('animals')">
                        <span class="game-icon">ğŸ¦</span>
                        <h3>Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª</h3>
                        <p>ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ´Ø§Ø¨Ù‡Ø©</p>
                    </button>

                    <button class="game-option" onclick="selectGameType('shapes')">
                        <span class="game-icon">â­</span>
                        <h3>Ø§Ù„Ø£Ø´ÙƒØ§Ù„</h3>
                        <p>ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ©</p>
                    </button>
                </div>
            </div>

            <!-- Ø´Ø§Ø´Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¤Ù‚Øª -->
            <div id="timerSelectionScreen" class="screen">
                <div class="timer-section">
                    <h2>Ø§Ø®ØªØ± Ù…Ø¯Ø© ÙƒÙ„ Ø³Ø¤Ø§Ù„:</h2>
                    <div class="timer-options">
                        <button class="timer-btn" onclick="selectTime(5)">5 Ø«ÙˆØ§Ù†ÙŠ</button>
                        <button class="timer-btn" onclick="selectTime(10)">10 Ø«ÙˆØ§Ù†ÙŠ</button>
                        <button class="timer-btn" onclick="selectTime(15)">15 Ø«Ø§Ù†ÙŠØ©</button>
                        <button class="timer-btn" onclick="selectTime(30)">30 Ø«Ø§Ù†ÙŠØ©</button>
                        <button class="timer-btn" onclick="selectTime(60)">Ø¯Ù‚ÙŠÙ‚Ø©</button>
                    </div>
                    <button class="main-btn" onclick="startGameNow()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨! ğŸš€</button>
                    <button class="main-btn back-btn" onclick="goBackToGameSelection()">Ø±Ø¬ÙˆØ¹</button>
                </div>
            </div>

            <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨ -->
            <div id="gamePlayScreen" class="screen">
                <div class="game-header">
                    <div class="score-display">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="currentScore">0</span></div>
                    <div class="timer-display" id="timeLeft">10</div>
                    <div class="question-display">Ø§Ù„Ø³Ø¤Ø§Ù„ <span id="currentQuestion">1</span> Ù…Ù† <span id="totalQuestions">10</span></div>
                </div>

                <div class="question-area">
                    <div class="question-text">Ø§Ø¨Ø­Ø« Ø¹Ù† Ù†ÙØ³ Ø§Ù„Ø¹Ù†ØµØ±:</div>
                    <div class="target-display" id="targetElement">ğŸ”´</div>
                </div>

                <div class="options-container" id="answersContainer">
                    <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ù‡Ù†Ø§ -->
                </div>
            </div>

            <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
            <div id="resultsScreen" class="screen">
                <div class="results-screen">
                    <div class="celebration">ğŸ‰</div>
                    <h2 class="results-title">Ø£Ø­Ø³Ù†Øª!</h2>
                    <div class="results-details">
                        <div>
                            Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: <strong><span id="finalScore">0</span> Ù…Ù† 10</strong>
                        </div>
                    </div>
                    <div class="results-details">
                        <div>
                            Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆÙ‚Øª: <strong><span id="totalGameTime">0</span> Ø«Ø§Ù†ÙŠØ©</strong>
                        </div>
                    </div>
                    <div class="results-details">
                        <div id="performanceMessage">Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹! ğŸŒŸ</div>
                    </div>

                    <button class="main-btn" onclick="playAgain()">Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ğŸ”„</button>
                    <button class="main-btn back-btn" onclick="chooseNewGame()">Ø§Ø®ØªØ± Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                </div>
            </div>
        </div>

        <script>
            // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
            let selectedGame = '';
            let selectedTimer = 0;
            let currentScore = 0;
            let currentQuestionNum = 1;
            let totalQuestionsNum = 10;
            let gameStartTime = 0;
            let questionTimer = null;
            let correctAnswer = '';
            let currentDifficulty = 2;

            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø­Ø³Ù†Ø© Ù…Ø¹ ØªØ·Ø§Ø¨Ù‚ ØªØ§Ù…
            const gameData = {
                colors: {
                    name: 'Ø§Ù„Ø£Ù„ÙˆØ§Ù†',
                    questions: [
                        { target: 'ğŸ”´', options: ['ğŸ”´', 'ğŸŸ¡', 'ğŸ”µ'], correct: 'ğŸ”´' },
                        { target: 'ğŸŸ¡', options: ['ğŸŸ¡', 'ğŸ”´', 'ğŸ”µ'], correct: 'ğŸŸ¡' },
                        { target: 'ğŸ”µ', options: ['ğŸ”µ', 'ğŸ”´', 'ğŸŸ¡'], correct: 'ğŸ”µ' },
                        { target: 'ğŸŸ¢', options: ['ğŸŸ¢', 'ğŸŸ£', 'ğŸŸ '], correct: 'ğŸŸ¢' },
                        { target: 'ğŸŸ£', options: ['ğŸŸ£', 'ğŸŸ¢', 'ğŸŸ '], correct: 'ğŸŸ£' },
                        { target: 'ğŸŸ ', options: ['ğŸŸ ', 'ğŸŸ¢', 'ğŸŸ£'], correct: 'ğŸŸ ' },
                        { target: 'âš«', options: ['âš«', 'âšª', 'ğŸŸ¤'], correct: 'âš«' },
                        { target: 'âšª', options: ['âšª', 'âš«', 'ğŸŸ¤'], correct: 'âšª' },
                        { target: 'ğŸŸ¤', options: ['ğŸŸ¤', 'âš«', 'âšª'], correct: 'ğŸŸ¤' },
                        { target: 'ğŸ”´', options: ['ğŸ”´', 'ğŸŸ¡', 'ğŸ”µ', 'ğŸŸ¢'], correct: 'ğŸ”´' }
                    ]
                },
                letters: {
                    name: 'Ø§Ù„Ø­Ø±ÙˆÙ',
                    questions: [
                        { target: 'Ø£', options: ['Ø£', 'Ø¨', 'Øª'], correct: 'Ø£' },
                        { target: 'Ø¨', options: ['Ø¨', 'Ø£', 'Øª'], correct: 'Ø¨' },
                        { target: 'Øª', options: ['Øª', 'Ø£', 'Ø¨'], correct: 'Øª' },
                        { target: 'Ø¬', options: ['Ø¬', 'Ø­', 'Ø®'], correct: 'Ø¬' },
                        { target: 'Ø­', options: ['Ø­', 'Ø¬', 'Ø®'], correct: 'Ø­' },
                        { target: 'Ø®', options: ['Ø®', 'Ø¬', 'Ø­'], correct: 'Ø®' },
                        { target: 'Ø¯', options: ['Ø¯', 'Ø°', 'Ø±'], correct: 'Ø¯' },
                        { target: 'Ø°', options: ['Ø°', 'Ø¯', 'Ø±'], correct: 'Ø°' },
                        { target: 'Ø±', options: ['Ø±', 'Ø¯', 'Ø°'], correct: 'Ø±' },
                        { target: 'Ø³', options: ['Ø³', 'Ø´', 'Øµ'], correct: 'Ø³' }
                    ]
                },
                numbers: {
                    name: 'Ø§Ù„Ø£Ø±Ù‚Ø§Ù…',
                    questions: [
                        { target: '1', options: ['â—', 'â—â—', 'â—â—â—'], correct: 'â—' },
                        { target: '2', options: ['â—â—', 'â—', 'â—â—â—'], correct: 'â—â—' },
                        { target: '3', options: ['â—â—â—', 'â—', 'â—â—'], correct: 'â—â—â—' },
                        { target: '4', options: ['â—â—â—â—', 'â—â—â—', 'â—â—'], correct: 'â—â—â—â—' },
                        { target: '1', options: ['ğŸ”µ', 'ğŸ”µğŸ”µ', 'ğŸ”µğŸ”µğŸ”µ'], correct: 'ğŸ”µ' },
                        { target: '2', options: ['ğŸ”µğŸ”µ', 'ğŸ”µ', 'ğŸ”µğŸ”µğŸ”µ'], correct: 'ğŸ”µğŸ”µ' },
                        { target: '3', options: ['ğŸ”µğŸ”µğŸ”µ', 'ğŸ”µ', 'ğŸ”µğŸ”µ'], correct: 'ğŸ”µğŸ”µğŸ”µ' },
                        { target: '4', options: ['ğŸ”µğŸ”µğŸ”µğŸ”µ', 'ğŸ”µğŸ”µğŸ”µ', 'ğŸ”µğŸ”µ'], correct: 'ğŸ”µğŸ”µğŸ”µğŸ”µ' },
                        { target: '5', options: ['ğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µ', 'ğŸ”µğŸ”µğŸ”µğŸ”µ', 'ğŸ”µğŸ”µğŸ”µ'], correct: 'ğŸ”µğŸ”µğŸ”µğŸ”µğŸ”µ' },
                        { target: '1', options: ['â­', 'â­â­', 'â­â­â­'], correct: 'â­' }
                    ]
                },
                animals: {
                    name: 'Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª',
                    questions: [
                        { target: 'ğŸ¦', options: ['ğŸ¦', 'ğŸ¯', 'ğŸ±'], correct: 'ğŸ¦' },
                        { target: 'ğŸ¯', options: ['ğŸ¯', 'ğŸ¦', 'ğŸ±'], correct: 'ğŸ¯' },
                        { target: 'ğŸ±', options: ['ğŸ±', 'ğŸ¦', 'ğŸ¯'], correct: 'ğŸ±' },
                        { target: 'ğŸ˜', options: ['ğŸ˜', 'ğŸ¦', 'ğŸ¦›'], correct: 'ğŸ˜' },
                        { target: 'ğŸ¦', options: ['ğŸ¦', 'ğŸ˜', 'ğŸ¦›'], correct: 'ğŸ¦' },
                        { target: 'ğŸ¦›', options: ['ğŸ¦›', 'ğŸ˜', 'ğŸ¦'], correct: 'ğŸ¦›' },
                        { target: 'ğŸ°', options: ['ğŸ°', 'ğŸ­', 'ğŸ¹'], correct: 'ğŸ°' },
                        { target: 'ğŸ­', options: ['ğŸ­', 'ğŸ°', 'ğŸ¹'], correct: 'ğŸ­' },
                        { target: 'ğŸ¹', options: ['ğŸ¹', 'ğŸ°', 'ğŸ­'], correct: 'ğŸ¹' },
                        { target: 'ğŸ¶', options: ['ğŸ¶', 'ğŸº', 'ğŸ¦Š'], correct: 'ğŸ¶' }
                    ]
                },
                shapes: {
                    name: 'Ø§Ù„Ø£Ø´ÙƒØ§Ù„',
                    questions: [
                        { target: 'â­', options: ['â­', 'ğŸ”¸', 'ğŸ”º'], correct: 'â­' },
                        { target: 'ğŸ”¸', options: ['ğŸ”¸', 'â­', 'ğŸ”º'], correct: 'ğŸ”¸' },
                        { target: 'ğŸ”º', options: ['ğŸ”º', 'â­', 'ğŸ”¸'], correct: 'ğŸ”º' },
                        { target: 'âšª', options: ['âšª', 'âš«', 'ğŸ”µ'], correct: 'âšª' },
                        { target: 'âš«', options: ['âš«', 'âšª', 'ğŸ”µ'], correct: 'âš«' },
                        { target: 'ğŸ”µ', options: ['ğŸ”µ', 'âšª', 'âš«'], correct: 'ğŸ”µ' },
                        { target: 'ğŸ”¹', options: ['ğŸ”¹', 'ğŸ”·', 'ğŸ”¶'], correct: 'ğŸ”¹' },
                        { target: 'ğŸ”·', options: ['ğŸ”·', 'ğŸ”¹', 'ğŸ”¶'], correct: 'ğŸ”·' },
                        { target: 'ğŸ”¶', options: ['ğŸ”¶', 'ğŸ”¹', 'ğŸ”·'], correct: 'ğŸ”¶' },
                        { target: 'â¬œ', options: ['â¬œ', 'â¬›', 'ğŸŸª'], correct: 'â¬œ' }
                    ]
                }
            };

            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£ØµÙˆØ§Øª
            let audioContext = null;

            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙˆØª
            function initAudio() {
                if (!audioContext) {
                    try {
                        audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    } catch (e) {
                        console.log('Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ØµÙˆØª');
                    }
                }
            }

            // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ø¬Ø§Ø­ (Ø¬Ù„ÙŠØªØ±)
            function playSuccessSound() {
                if (!audioContext) return;

                try {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();

                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);

                    // ØµÙˆØª Ø¬Ù„ÙŠØªØ± Ù…ØªØ¯Ø±Ø¬
                    oscillator.frequency.setValueAtTime(523, audioContext.currentTime); // C5
                    oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.1); // E5
                    oscillator.frequency.setValueAtTime(784, audioContext.currentTime + 0.2); // G5
                    oscillator.frequency.setValueAtTime(1047, audioContext.currentTime + 0.3); // C6

                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                } catch (e) {
                    console.log('Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ø¬Ø§Ø­');
                }
            }

            // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø®Ø·Ø£ (Ø¨Ø§Ø²)
            function playErrorSound() {
                if (!audioContext) return;

                try {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();

                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);

                    // ØµÙˆØª Ø¨Ø§Ø² Ù…Ù†Ø®ÙØ¶
                    oscillator.frequency.setValueAtTime(150, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(120, audioContext.currentTime + 0.1);
                    oscillator.frequency.setValueAtTime(100, audioContext.currentTime + 0.2);

                    oscillator.type = 'sawtooth';
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);

                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.4);
                } catch (e) {
                    console.log('Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø®Ø·Ø£');
                }
            }

            // Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ù„Ø¹Ø¨Ø©
            function selectGameType(gameType) {
                initAudio();
                selectedGame = gameType;
                showScreen('timerSelectionScreen');
            }

            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙˆÙ‚Øª
            function selectTime(seconds) {
                selectedTimer = seconds;

                document.querySelectorAll('.timer-btn').forEach((btn) => {
                    btn.classList.remove('selected');
                });

                event.target.classList.add('selected');
            }

            // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
            function startGameNow() {
                if (!selectedTimer) {
                    alert('Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ‚Øª Ø£ÙˆÙ„Ø§Ù‹!');
                    return;
                }

                initAudio();

                currentScore = 0;
                currentQuestionNum = 1;
                currentDifficulty = 2;
                gameStartTime = Date.now();

                showScreen('gamePlayScreen');
                displayQuestion();
            }

            // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„
            function displayQuestion() {
                if (currentQuestionNum > totalQuestionsNum) {
                    endGame();
                    return;
                }

                // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØµØ¹ÙˆØ¨Ø© ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹
                if (currentQuestionNum > 3) currentDifficulty = 3;
                if (currentQuestionNum > 6) currentDifficulty = 4;
                if (currentQuestionNum > 8) currentDifficulty = Math.min(5, gameData[selectedGame].questions[0].options.length);

                const questions = gameData[selectedGame].questions;
                const randomIndex = Math.floor(Math.random() * questions.length);
                const question = questions[randomIndex];

                correctAnswer = question.correct;

                document.getElementById('targetElement').textContent = question.target;
                document.getElementById('currentScore').textContent = currentScore;
                document.getElementById('currentQuestion').textContent = currentQuestionNum;
                document.getElementById('totalQuestions').textContent = totalQuestionsNum;

                createAnswerOptions(question.options);
                startQuestionTimer();
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©
            function createAnswerOptions(baseOptions) {
                const container = document.getElementById('answersContainer');
                container.innerHTML = '';

                // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© ÙÙŠ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
                let options = [...baseOptions];

                // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©
                if (!options.includes(correctAnswer)) {
                    options[0] = correctAnswer; // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø£ÙˆÙ„ Ø¨Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                }

                // Ø®Ù„Ø· Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
                options = options.sort(() => Math.random() - 0.5);

                // Ø£Ø®Ø° Ø¹Ø¯Ø¯ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø­Ø³Ø¨ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©
                options = options.slice(0, Math.min(currentDifficulty, options.length));

                // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                if (!options.includes(correctAnswer)) {
                    options[options.length - 1] = correctAnswer;
                }

                // Ø®Ù„Ø· Ù†Ù‡Ø§Ø¦ÙŠ
                options = options.sort(() => Math.random() - 0.5);

                options.forEach((option) => {
                    const button = document.createElement('button');
                    button.className = 'option-btn';
                    button.textContent = option;
                    button.onclick = () => checkPlayerAnswer(option, button);
                    container.appendChild(button);
                });
            }

            // Ø¨Ø¯Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„Ø³Ø¤Ø§Ù„
            function startQuestionTimer() {
                let timeRemaining = selectedTimer;
                document.getElementById('timeLeft').textContent = timeRemaining;

                questionTimer = setInterval(() => {
                    timeRemaining--;
                    document.getElementById('timeLeft').textContent = timeRemaining;

                    if (timeRemaining <= 0) {
                        clearInterval(questionTimer);
                        moveToNextQuestion();
                    }
                }, 1000);
            }

            // ÙØ­Øµ Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨
            function checkPlayerAnswer(selectedOption, buttonElement) {
                clearInterval(questionTimer);

                document.querySelectorAll('.option-btn').forEach((btn) => {
                    btn.onclick = null;
                });

                if (selectedOption === correctAnswer) {
                    buttonElement.classList.add('correct');
                    currentScore++;
                    playSuccessSound();
                } else {
                    buttonElement.classList.add('wrong');
                    playErrorSound();

                    document.querySelectorAll('.option-btn').forEach((btn) => {
                        if (btn.textContent === correctAnswer) {
                            btn.classList.add('correct');
                        }
                    });
                }

                setTimeout(moveToNextQuestion, 1800);
            }

            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
            function moveToNextQuestion() {
                currentQuestionNum++;
                displayQuestion();
            }

            // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
            function endGame() {
                const totalTime = Math.round((Date.now() - gameStartTime) / 1000);

                document.getElementById('finalScore').textContent = currentScore;
                document.getElementById('totalGameTime').textContent = totalTime;

                // Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø­Ø³Ù†Ø©
                const performanceMsg = document.getElementById('performanceMessage');
                const celebrationDiv = document.querySelector('.celebration');

                if (currentScore === 10) {
                    performanceMsg.textContent = 'Ù…Ø«Ø§Ù„ÙŠ! ğŸ† Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹ Ø¬Ø¯Ø§Ù‹!';
                    celebrationDiv.textContent = 'ğŸ‰ğŸ†ğŸ‰';
                    document.querySelector('.results-title').textContent = 'Ù…Ù…ØªØ§Ø²!';
                } else if (currentScore >= 8) {
                    performanceMsg.textContent = 'Ø£Ø­Ø³Ù†Øª! ğŸŒŸ Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹!';
                    celebrationDiv.textContent = 'ğŸ‰â­ğŸ‰';
                    document.querySelector('.results-title').textContent = 'Ø£Ø­Ø³Ù†Øª!';
                } else if (currentScore >= 6) {
                    performanceMsg.textContent = 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! ğŸ‘ Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªØ­Ø³Ù†!';
                    celebrationDiv.textContent = 'ğŸ‘ğŸ¯ğŸ‘';
                    document.querySelector('.results-title').textContent = 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹!';
                } else if (currentScore >= 5) {
                    performanceMsg.textContent = 'Ø¬ÙŠØ¯! ğŸ’ª ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¦Ùƒ Ø£ÙƒØ«Ø±!';
                    celebrationDiv.textContent = 'ğŸ’ªğŸ²ğŸ’ª';
                    document.querySelector('.results-title').textContent = 'Ø¬ÙŠØ¯!';
                } else {
                    performanceMsg.textContent = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰! ğŸ¯ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ ÙŠØ­Ø³Ù† Ø§Ù„Ø£Ø¯Ø§Ø¡!';
                    celebrationDiv.textContent = 'ğŸ”„ğŸ“šğŸ”„';
                    document.querySelector('.results-title').textContent = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!';
                }

                showScreen('resultsScreen');
            }

            // Ø§Ù„Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
            function playAgain() {
                showScreen('timerSelectionScreen');
            }

            // Ø§Ø®ØªÙŠØ§Ø± Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
            function chooseNewGame() {
                selectedGame = '';
                selectedTimer = 0;
                document.querySelectorAll('.timer-btn').forEach((btn) => {
                    btn.classList.remove('selected');
                });
                showScreen('gameSelectionScreen');
            }

            // Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„Ø¹Ø¨Ø©
            function goBackToGameSelection() {
                showScreen('gameSelectionScreen');
            }

            // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ù…Ø¹ÙŠÙ†Ø©
            function showScreen(screenId) {
                document.querySelectorAll('.screen').forEach((screen) => {
                    screen.classList.remove('active');
                });
                document.getElementById(screenId).classList.add('active');
            }

            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
            document.addEventListener('DOMContentLoaded', function () {
                showScreen('gameSelectionScreen');
            });
        </script>
    </body>
</html>

<!doctype html>
<html lang="ar" dir="rtl">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ù…Ø®ØªÙ„Ù</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Arial', sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                direction: rtl;
                color: white;
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 20px;
            }

            .header {
                text-align: center;
                margin-bottom: 30px;
            }

            .title {
                font-size: 3rem;
                color: #ffd700;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }

            .subtitle {
                font-size: 1.2rem;
                color: #e0e0e0;
            }

            .game-info {
                background: rgba(255, 255, 255, 0.2);
                border-radius: 15px;
                padding: 20px;
                margin-bottom: 30px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                min-width: 300px;
                backdrop-filter: blur(10px);
            }

            .info-item {
                text-align: center;
                font-size: 1.1rem;
                font-weight: bold;
            }

            .grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
                max-width: 600px;
                margin-bottom: 30px;
            }

            .item {
                background: white;
                color: #333;
                border-radius: 15px;
                padding: 30px;
                text-align: center;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
                font-size: 4rem;
                min-height: 150px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }

            .item:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            }

            .item-name {
                font-size: 1rem;
                margin-top: 10px;
                color: #666;
            }

            .buttons {
                display: flex;
                gap: 15px;
            }

            .btn {
                background: linear-gradient(45deg, #4caf50, #45a049);
                color: white;
                border: none;
                padding: 15px 30px;
                font-size: 1.1rem;
                border-radius: 25px;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            }

            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            }

            .btn-secondary {
                background: linear-gradient(45deg, #2196f3, #1976d2);
            }

            .feedback {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.9);
                color: white;
                padding: 30px 50px;
                border-radius: 15px;
                font-size: 2rem;
                font-weight: bold;
                z-index: 1000;
                display: none;
                text-align: center;
            }

            .feedback.success {
                background: rgba(76, 175, 80, 0.9);
            }

            .feedback.error {
                background: rgba(244, 67, 54, 0.9);
            }

            .correct {
                animation: correctPulse 1s ease-out;
                border: 3px solid #4caf50;
            }

            .wrong {
                animation: shake 0.6s ease-in-out;
                border: 3px solid #f44336;
            }

            .highlight {
                animation: highlight 1.2s ease-in-out;
                border: 3px solid #ffd700;
            }

            @keyframes correctPulse {
                0% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.1);
                }
                100% {
                    transform: scale(1);
                }
            }

            @keyframes shake {
                0%,
                100% {
                    transform: translateX(0);
                }
                10%,
                30%,
                50%,
                70%,
                90% {
                    transform: translateX(-5px);
                }
                20%,
                40%,
                60%,
                80% {
                    transform: translateX(5px);
                }
            }

            @keyframes highlight {
                0%,
                100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.7;
                }
            }

            .hearts {
                font-size: 1.5rem;
            }

            .heart.lost {
                opacity: 0.3;
            }

            @media (max-width: 768px) {
                .grid {
                    grid-template-columns: repeat(2, 1fr);
                    gap: 15px;
                }

                .item {
                    font-size: 3rem;
                    padding: 20px;
                    min-height: 120px;
                }

                .title {
                    font-size: 2rem;
                }

                .game-info {
                    flex-direction: column;
                    gap: 10px;
                    min-width: auto;
                }
            }
        </style>
    </head>
    <body>
        <div class="header">
            <h1 class="title">ğŸ¯ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ù…Ø®ØªÙ„Ù</h1>
            <p class="subtitle">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø®ØªÙ„Ù ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</p>
        </div>

        <div class="game-info">
            <div class="info-item">Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <span id="level">1</span></div>
            <div class="info-item">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>
            <div class="info-item">
                <div class="hearts">
                    <span id="heart1">â¤ï¸</span>
                    <span id="heart2">â¤ï¸</span>
                    <span id="heart3">â¤ï¸</span>
                </div>
            </div>
        </div>

        <div class="grid" id="gameGrid">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù‡Ù†Ø§ -->
        </div>

        <div class="buttons">
            <button class="btn" onclick="newGame()">ğŸ® Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
            <button class="btn btn-secondary" onclick="nextLevel()">â¬†ï¸ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ</button>
            <button class="btn btn-secondary" onclick="toggleSound()">ğŸ”Š Ø§Ù„ØµÙˆØª</button>
        </div>

        <div id="feedback" class="feedback"></div>

        <script>
            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
            const gameData = {
                kitchen: [
                    { emoji: 'ğŸ¥„', name: 'Ù…Ù„Ø¹Ù‚Ø©' },
                    { emoji: 'ğŸ”ª', name: 'Ø³ÙƒÙŠÙ†' },
                    { emoji: 'ğŸ³', name: 'Ù…Ù‚Ù„Ø§Ø©' },
                    { emoji: 'ğŸ¥˜', name: 'Ù‚Ø¯Ø±' },
                    { emoji: 'ğŸ½ï¸', name: 'Ø·Ø¨Ù‚' }
                ],
                school: [
                    { emoji: 'âœï¸', name: 'Ù‚Ù„Ù…' },
                    { emoji: 'ğŸ“', name: 'Ù…Ø³Ø·Ø±Ø©' },
                    { emoji: 'ğŸ“š', name: 'ÙƒØªØ§Ø¨' },
                    { emoji: 'âœ‚ï¸', name: 'Ù…Ù‚Øµ' },
                    { emoji: 'ğŸ–ï¸', name: 'Ù‚Ù„Ù… ØªÙ„ÙˆÙŠÙ†' }
                ],
                fruit: [
                    { emoji: 'ğŸ', name: 'ØªÙØ§Ø­Ø©' },
                    { emoji: 'ğŸŒ', name: 'Ù…ÙˆØ²' },
                    { emoji: 'ğŸŠ', name: 'Ø¨Ø±ØªÙ‚Ø§Ù„' },
                    { emoji: 'ğŸ‡', name: 'Ø¹Ù†Ø¨' },
                    { emoji: 'ğŸ“', name: 'ÙØ±Ø§ÙˆÙ„Ø©' }
                ],
                animals: [
                    { emoji: 'ğŸ±', name: 'Ù‚Ø·Ø©' },
                    { emoji: 'ğŸ•', name: 'ÙƒÙ„Ø¨' },
                    { emoji: 'ğŸ¦', name: 'Ø£Ø³Ø¯' },
                    { emoji: 'ğŸ˜', name: 'ÙÙŠÙ„' },
                    { emoji: 'ğŸ»', name: 'Ø¯Ø¨' }
                ],
                vehicles: [
                    { emoji: 'ğŸš—', name: 'Ø³ÙŠØ§Ø±Ø©' },
                    { emoji: 'ğŸšŒ', name: 'Ø­Ø§ÙÙ„Ø©' },
                    { emoji: 'ğŸš²', name: 'Ø¯Ø±Ø§Ø¬Ø©' },
                    { emoji: 'âœˆï¸', name: 'Ø·Ø§Ø¦Ø±Ø©' },
                    { emoji: 'ğŸš‚', name: 'Ù‚Ø·Ø§Ø±' }
                ]
            };

            // Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
            let gameState = {
                level: 1,
                score: 0,
                lives: 3,
                soundEnabled: true,
                correctIndex: -1,
                isPlaying: false
            };

            // Ø¨Ø¯Ø¡ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
            function newGame() {
                gameState.level = 1;
                gameState.score = 0;
                gameState.lives = 3;
                updateDisplay();
                generateRound();
            }

            // ØªÙˆÙ„ÙŠØ¯ Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©
            function generateRound() {
                const categories = Object.keys(gameData);

                // Ø§Ø®ØªÙŠØ§Ø± ÙØ¦ØªÙŠÙ† Ù…Ø®ØªÙ„ÙØªÙŠÙ†
                const category1 = categories[Math.floor(Math.random() * categories.length)];
                let category2;
                do {
                    category2 = categories[Math.floor(Math.random() * categories.length)];
                } while (category2 === category1);

                // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù†Ø§ØµØ±
                const items1 = gameData[category1];
                const items2 = gameData[category2];

                // ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                const gridSize = Math.min(6, 3 + gameState.level);

                // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ØµÙÙˆÙØ©
                const gameItems = [];
                const correctIndex = Math.floor(Math.random() * gridSize);

                for (let i = 0; i < gridSize; i++) {
                    if (i === correctIndex) {
                        // Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø®ØªÙ„Ù
                        const item = items2[Math.floor(Math.random() * items2.length)];
                        gameItems.push({ ...item, category: category2, isOdd: true });
                    } else {
                        // Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
                        const item = items1[Math.floor(Math.random() * items1.length)];
                        gameItems.push({ ...item, category: category1, isOdd: false });
                    }
                }

                gameState.correctIndex = correctIndex;
                gameState.isPlaying = true;
                displayGrid(gameItems);
            }

            // Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø¨ÙƒØ©
            function displayGrid(items) {
                const grid = document.getElementById('gameGrid');
                grid.innerHTML = '';

                // ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©
                const gridSize = items.length;
                if (gridSize <= 4) {
                    grid.style.gridTemplateColumns = 'repeat(2, 1fr)';
                } else if (gridSize <= 6) {
                    grid.style.gridTemplateColumns = 'repeat(3, 1fr)';
                } else {
                    grid.style.gridTemplateColumns = 'repeat(3, 1fr)';
                }

                items.forEach((item, index) => {
                    const div = document.createElement('div');
                    div.className = 'item';
                    div.innerHTML = `
                    ${item.emoji}
                    <div class="item-name">${item.name}</div>
                `;
                    div.onclick = () => selectItem(index);
                    grid.appendChild(div);
                });
            }

            // Ø§Ø®ØªÙŠØ§Ø± Ø¹Ù†ØµØ±
            function selectItem(index) {
                if (!gameState.isPlaying) return;

                gameState.isPlaying = false;
                const items = document.querySelectorAll('.item');
                const selectedItem = items[index];

                if (index === gameState.correctIndex) {
                    // Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©
                    selectedItem.classList.add('correct');
                    gameState.score += 10;
                    showFeedback('ğŸ‰ Ù…Ù…ØªØ§Ø²! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!', 'success');
                    playSound('correct');

                    setTimeout(() => {
                        generateRound();
                    }, 1500);
                } else {
                    // Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©
                    selectedItem.classList.add('wrong');
                    gameState.lives--;
                    showFeedback('âŒ Ø®Ø·Ø£! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰', 'error');
                    playSound('wrong');

                    // Ø¥Ø¨Ø±Ø§Ø² Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                    setTimeout(() => {
                        items[gameState.correctIndex].classList.add('highlight');

                        setTimeout(() => {
                            if (gameState.lives <= 0) {
                                showFeedback('ğŸ’” Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©! Ø§Ø¶ØºØ· "Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©"', 'error');
                            } else {
                                generateRound();
                            }
                        }, 2000);
                    }, 1000);
                }

                updateDisplay();
            }

            // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©
            function showFeedback(message, type) {
                const feedback = document.getElementById('feedback');
                feedback.textContent = message;
                feedback.className = `feedback ${type}`;
                feedback.style.display = 'block';

                setTimeout(() => {
                    feedback.style.display = 'none';
                }, 2000);
            }

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            function updateDisplay() {
                document.getElementById('level').textContent = gameState.level;
                document.getElementById('score').textContent = gameState.score;

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ù„ÙˆØ¨
                for (let i = 1; i <= 3; i++) {
                    const heart = document.getElementById(`heart${i}`);
                    if (i <= gameState.lives) {
                        heart.classList.remove('lost');
                    } else {
                        heart.classList.add('lost');
                    }
                }
            }

            // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ
            function nextLevel() {
                gameState.level++;
                generateRound();
                showFeedback(`ğŸ†™ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${gameState.level}!`, 'success');
            }

            // ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª
            function toggleSound() {
                gameState.soundEnabled = !gameState.soundEnabled;
                showFeedback(gameState.soundEnabled ? 'ğŸ”Š ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª' : 'ğŸ”‡ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª', 'success');
            }

            // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
            function playSound(type) {
                if (!gameState.soundEnabled) return;

                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                if (type === 'correct') {
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                } else if (type === 'wrong') {
                    oscillator.frequency.setValueAtTime(300, audioContext.currentTime);
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                }
            }

            // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            window.onload = function () {
                newGame();
            };
        </script>
    </body>
</html>

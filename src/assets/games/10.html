<!doctype html>
<html lang="ar" dir="rtl">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ğŸµ Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„Ø³Ù…Ø¹ÙŠ - Ù†Ø³Ø®Ø© Ù…Ø¨Ø³Ø·Ø©</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Arial', sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                direction: rtl;
                padding: 20px;
            }

            .container {
                max-width: 800px;
                margin: 0 auto;
            }

            .header {
                text-align: center;
                color: white;
                margin-bottom: 30px;
            }

            .header h1 {
                font-size: 2.5em;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }

            .game-box {
                background: rgba(255, 255, 255, 0.95);
                border-radius: 20px;
                padding: 30px;
                text-align: center;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                margin-bottom: 20px;
            }

            .level-buttons {
                display: flex;
                justify-content: center;
                gap: 15px;
                margin-bottom: 30px;
                flex-wrap: wrap;
            }

            .level-btn {
                padding: 12px 20px;
                border: none;
                border-radius: 25px;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
                background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
                color: #333;
            }

            .level-btn.active {
                background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
                transform: translateY(-2px);
            }

            .level-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            }

            .score-display {
                font-size: 24px;
                font-weight: bold;
                color: #333;
                margin-bottom: 20px;
            }

            .play-button {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                border-radius: 50%;
                width: 120px;
                height: 120px;
                font-size: 50px;
                cursor: pointer;
                margin: 20px auto;
                display: block;
                transition: all 0.3s ease;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            }

            .play-button:hover {
                transform: scale(1.1);
                box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
            }

            .play-button:active {
                transform: scale(0.95);
            }

            .play-button.playing {
                background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
                animation: pulse 1s infinite;
            }

            .message {
                font-size: 20px;
                font-weight: bold;
                margin: 20px 0;
                padding: 15px;
                border-radius: 15px;
                min-height: 60px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .message.success {
                background: linear-gradient(135deg, #c3f53c 0%, #4facfe 100%);
                color: white;
            }

            .message.error {
                background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
                color: white;
            }

            .cards-container {
                display: grid;
                gap: 20px;
                justify-content: center;
                margin: 30px 0;
            }

            .cards-3 {
                grid-template-columns: repeat(3, 1fr);
                max-width: 600px;
                margin: 0 auto;
            }

            .cards-6 {
                grid-template-columns: repeat(3, 1fr);
                max-width: 800px;
                margin: 0 auto;
            }

            .card {
                background: white;
                border-radius: 20px;
                padding: 20px;
                text-align: center;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
                border: 4px solid transparent;
                min-height: 150px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }

            .card:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            }

            .card.correct {
                border-color: #4caf50;
                background: linear-gradient(135deg, #c3f53c 0%, #4facfe 100%);
                animation: correctPulse 0.6s ease;
            }

            .card.wrong {
                border-color: #f44336;
                background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
                animation: wrongShake 0.6s ease;
            }

            .card-emoji {
                font-size: 50px;
                margin-bottom: 10px;
            }

            .card-text {
                font-size: 18px;
                font-weight: bold;
                color: #333;
            }

            .test-button {
                background: #27ae60;
                color: white;
                border: none;
                border-radius: 15px;
                padding: 12px 25px;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
                margin: 10px;
                transition: all 0.3s ease;
            }

            .test-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            }

            .next-button {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                border-radius: 25px;
                padding: 15px 30px;
                font-size: 18px;
                font-weight: bold;
                cursor: pointer;
                margin: 20px auto;
                display: none;
                transition: all 0.3s ease;
            }

            @keyframes pulse {
                0%,
                100% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.1);
                }
            }

            @keyframes correctPulse {
                0%,
                100% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.05);
                }
            }

            @keyframes wrongShake {
                0%,
                100% {
                    transform: translateX(0);
                }
                25% {
                    transform: translateX(-5px);
                }
                75% {
                    transform: translateX(5px);
                }
            }

            @media (max-width: 768px) {
                .cards-3,
                .cards-6 {
                    grid-template-columns: repeat(2, 1fr);
                    max-width: 400px;
                }

                .card {
                    min-height: 120px;
                    padding: 15px;
                }

                .card-emoji {
                    font-size: 35px;
                }

                .card-text {
                    font-size: 14px;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>ğŸµ Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„Ø³Ù…Ø¹ÙŠ ğŸµ</h1>
                <p>Ø§Ø³ØªÙ…Ø¹ Ù„Ù„ØµÙˆØª ÙˆØ§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©!</p>
            </div>

            <div class="game-box">
                <div class="level-buttons">
                    <button class="level-btn active" onclick="selectLevel(1)">ğŸ¾ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª (Ø³Ù‡Ù„)</button>
                    <button class="level-btn" onclick="selectLevel(2)">ğŸ¦ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª (Ù…ØªÙˆØ³Ø·)</button>
                    <button class="level-btn" onclick="selectLevel(3)">ğŸ¹ Ø§Ù„Ø¢Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚ÙŠØ©</button>
                </div>

                <div class="score-display" id="score-display">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span> | Ø§Ù„Ø¬ÙˆÙ„Ø©: <span id="round">1</span>/5</div>

                <button class="test-button" onclick="testSpeech()">ğŸ”Š Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµÙˆØª</button>

                <button class="play-button" id="play-btn" onclick="playSound()">ğŸ”Š</button>

                <div class="message" id="message">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµÙˆØª" Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨!</div>

                <div class="cards-container" id="cards-container">
                    <!-- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                </div>
            </div>
        </div>

        <script>
            // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©
            let currentLevel = 1;
            let currentRound = 1;
            let score = 0;
            let currentAnswer = '';
            let isPlaying = false;

            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª
            const levels = {
                1: {
                    name: 'Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª (Ø³Ù‡Ù„)',
                    items: [
                        { emoji: 'ğŸ±', name: 'Ù‚Ø·Ø©', sound: 'Ù…ÙŠØ§Ùˆ Ù…ÙŠØ§Ùˆ' },
                        { emoji: 'ğŸ¶', name: 'ÙƒÙ„Ø¨', sound: 'Ù‡Ø§Ù Ù‡Ø§Ù Ù‡Ø§Ù' },
                        { emoji: 'ğŸ„', name: 'Ø¨Ù‚Ø±Ø©', sound: 'Ù…ÙˆÙˆÙˆÙˆÙˆÙˆÙˆ' }
                    ]
                },
                2: {
                    name: 'Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª (Ù…ØªÙˆØ³Ø·)',
                    items: [
                        { emoji: 'ğŸ¦', name: 'Ø£Ø³Ø¯', sound: 'Ø±ÙˆÙˆÙˆÙˆÙˆÙˆÙˆØ§Ø±' },
                        { emoji: 'ğŸ˜', name: 'ÙÙŠÙ„', sound: 'ÙÙˆÙˆÙˆÙˆÙˆÙˆÙˆ' },
                        { emoji: 'ğŸ¦', name: 'Ø·Ø§Ø¦Ø±', sound: 'ØªØ´ÙŠØ¨ ØªØ´ÙŠØ¨ ØªØ´ÙŠØ¨' },
                        { emoji: 'ğŸ‘', name: 'Ø®Ø±ÙˆÙ', sound: 'Ø¨Ø§Ø§Ø§Ø§Ø¹ Ø¨Ø§Ø§Ø¹' },
                        { emoji: 'ğŸ´', name: 'Ø­ØµØ§Ù†', sound: 'Ù‡ÙŠÙŠÙŠÙŠÙ‡ Ù‡ÙŠÙ‡' },
                        { emoji: 'ğŸ“', name: 'Ø¯ÙŠÙƒ', sound: 'ÙƒÙˆÙƒÙˆ Ø±ÙŠÙƒÙˆÙˆÙˆÙˆ' }
                    ]
                },
                3: {
                    name: 'Ø§Ù„Ø¢Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚ÙŠØ©',
                    items: [
                        { emoji: 'ğŸ¹', name: 'Ø¨ÙŠØ§Ù†Ùˆ', sound: 'ØªÙŠÙ† ØªÙŠÙ† ØªØ§Ø§Ù†' },
                        { emoji: 'ğŸ¥', name: 'Ø·Ø¨Ù„', sound: 'Ø¯Ù… Ø¯Ù… Ø¯Ù…' },
                        { emoji: 'ğŸ¸', name: 'Ø¬ÙŠØªØ§Ø±', sound: 'ØªØ±ÙŠÙ† ØªØ±ÙŠÙ†' },
                        { emoji: 'ğŸ»', name: 'ÙƒÙ…Ø§Ù†', sound: 'Ù„Ø§Ø§Ø§Ø§Ø§ Ù„Ø§Ø§Ø§' },
                        { emoji: 'ğŸµ', name: 'Ù†Ø§ÙŠ', sound: 'ÙÙˆÙˆÙˆÙˆÙˆ ÙÙˆÙˆ' },
                        { emoji: 'ğŸ””', name: 'Ø¬Ø±Ø³', sound: 'ØªÙŠÙ†Øº ØªÙˆÙ†Øº' }
                    ]
                }
            };

            // Ø¯Ø§Ù„Ø© Ø§Ù„Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø³ÙŠØ·Ø©
            function speak(text, options = {}) {
                return new Promise((resolve) => {
                    // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¯Ø¹Ù… Ø§Ù„Ù…ØªØµÙØ­
                    if (!('speechSynthesis' in window)) {
                        console.error('Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… SpeechSynthesis');
                        showMessage('âŒ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„Ù…Ù†Ø·ÙˆÙ‚Ø©', 'error');
                        resolve();
                        return;
                    }

                    // Ø¥ÙŠÙ‚Ø§Ù Ø£ÙŠ ÙƒÙ„Ø§Ù… Ø³Ø§Ø¨Ù‚
                    speechSynthesis.cancel();

                    const utterance = new SpeechSynthesisUtterance(text);

                    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØª
                    utterance.rate = options.rate || 1.0;
                    utterance.pitch = options.pitch || 1.0;
                    utterance.volume = options.volume || 0.8;
                    utterance.lang = 'ar-SA';

                    // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù†Ø·Ù‚
                    utterance.onstart = () => {
                        console.log('ğŸ¤ Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ø·Ù‚:', text);
                    };

                    utterance.onend = () => {
                        console.log('âœ… Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ù†Ø·Ù‚:', text);
                        resolve();
                    };

                    utterance.onerror = (error) => {
                        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø·Ù‚:', error);
                        resolve();
                    };

                    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø·Ù‚
                    try {
                        speechSynthesis.speak(utterance);
                    } catch (error) {
                        console.error('âŒ ÙØ´Ù„ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø·Ù‚:', error);
                        showMessage('âŒ ÙØ´Ù„ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª', 'error');
                        resolve();
                    }
                });
            }

            // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø·Ù‚
            async function testSpeech() {
                console.log('ğŸ§ª Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø·Ù‚...');
                showMessage('ğŸ¤ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£ØµÙˆØ§Øª...', 'success');

                try {
                    await speak('Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„Ø³Ù…Ø¹ÙŠ');
                    await new Promise((resolve) => setTimeout(resolve, 500));

                    await speak('Ù…ÙŠØ§Ùˆ Ù…ÙŠØ§Ùˆ', { pitch: 1.8, rate: 1.2 });
                    await new Promise((resolve) => setTimeout(resolve, 500));

                    await speak('Ù‡Ø§Ù Ù‡Ø§Ù Ù‡Ø§Ù', { pitch: 0.7, rate: 1.5 });
                    await new Promise((resolve) => setTimeout(resolve, 500));

                    await speak('Ù…ÙˆÙˆÙˆÙˆÙˆÙˆÙˆ', { pitch: 0.5, rate: 0.8 });

                    showMessage('ğŸ‰ Ù…Ù…ØªØ§Ø²! Ø§Ù„Ø£ØµÙˆØ§Øª ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø±Ø§Ø¦Ø¹. Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø¢Ù†!', 'success');
                } catch (error) {
                    console.error('âŒ ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø·Ù‚:', error);
                    showMessage('âŒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£ØµÙˆØ§Øª. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª.', 'error');
                }
            }

            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªÙˆÙ‰
            function selectLevel(level) {
                currentLevel = level;

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
                document.querySelectorAll('.level-btn').forEach((btn) => btn.classList.remove('active'));
                event.target.classList.add('active');

                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©
                restartGame();
            }

            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©
            function restartGame() {
                currentRound = 1;
                score = 0;
                updateDisplay();
                generateRound();
                showMessage('ğŸ® Ù…Ø³ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯! Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø³Ù…Ø§Ø¹Ø© Ù„Ø³Ù…Ø§Ø¹ Ø§Ù„ØµÙˆØª.');
            }

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            function updateDisplay() {
                document.getElementById('score').textContent = score;
                document.getElementById('round').textContent = currentRound;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©
            function generateRound() {
                const levelData = levels[currentLevel];
                const items = [...levelData.items];

                // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                const correctIndex = Math.floor(Math.random() * items.length);
                currentAnswer = items[correctIndex].name;

                // ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
                const cardCount = currentLevel === 1 ? 3 : 6;
                const displayItems = [items[correctIndex]];
                items.splice(correctIndex, 1);

                // Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
                while (displayItems.length < cardCount && items.length > 0) {
                    const randomIndex = Math.floor(Math.random() * items.length);
                    displayItems.push(items[randomIndex]);
                    items.splice(randomIndex, 1);
                }

                // Ø®Ù„Ø· Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
                displayItems.sort(() => Math.random() - 0.5);

                // Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
                displayCards(displayItems);
            }

            // Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
            function displayCards(items) {
                const container = document.getElementById('cards-container');
                const cardCount = currentLevel === 1 ? 3 : 6;

                container.className = `cards-container cards-${cardCount}`;
                container.innerHTML = '';

                items.forEach((item) => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.onclick = () => selectAnswer(item.name, card);

                    card.innerHTML = `
                    <div class="card-emoji">${item.emoji}</div>
                    <div class="card-text">${item.name}</div>
                `;

                    container.appendChild(card);
                });
            }

            // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
            async function playSound() {
                if (isPlaying) {
                    showMessage('â³ Ø§Ù„ØµÙˆØª Ù‚ÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„ØŒ Ø§Ù†ØªØ¸Ø±...', 'error');
                    return;
                }

                if (!currentAnswer) {
                    showMessage('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØµÙˆØª Ù„Ù„ØªØ´ØºÙŠÙ„! Ø§Ø¨Ø¯Ø£ Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©.', 'error');
                    return;
                }

                isPlaying = true;
                const playBtn = document.getElementById('play-btn');
                playBtn.classList.add('playing');
                playBtn.innerHTML = 'ğŸ¤';

                try {
                    const levelData = levels[currentLevel];
                    const correctItem = levelData.items.find((item) => item.name === currentAnswer);

                    if (correctItem) {
                        showMessage(`ğŸ¤ ÙŠØªÙ… Ù†Ø·Ù‚ ØµÙˆØª: ${correctItem.name}`, 'success');

                        // ØªØ­Ø¯ÙŠØ¯ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø·Ù‚ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ØµÙˆØª
                        let speechOptions = { volume: 0.9 };

                        if (correctItem.sound.includes('Ù…ÙŠØ§Ùˆ')) {
                            speechOptions = { pitch: 1.8, rate: 1.2, volume: 0.9 };
                        } else if (correctItem.sound.includes('Ù‡Ø§Ù')) {
                            speechOptions = { pitch: 0.7, rate: 1.5, volume: 0.9 };
                        } else if (correctItem.sound.includes('Ù…ÙˆÙˆÙˆ')) {
                            speechOptions = { pitch: 0.5, rate: 0.8, volume: 0.9 };
                        } else if (correctItem.sound.includes('Ø±ÙˆÙˆ')) {
                            speechOptions = { pitch: 0.4, rate: 0.9, volume: 1.0 };
                        } else if (correctItem.sound.includes('ÙÙˆÙˆ')) {
                            speechOptions = { pitch: 0.6, rate: 1.0, volume: 0.9 };
                        } else if (correctItem.sound.includes('ØªØ´ÙŠØ¨')) {
                            speechOptions = { pitch: 2.0, rate: 1.8, volume: 0.8 };
                        } else if (correctItem.sound.includes('Ø¨Ø§Ø§Ø¹')) {
                            speechOptions = { pitch: 1.2, rate: 1.1, volume: 0.8 };
                        } else if (correctItem.sound.includes('Ù‡ÙŠÙ‡')) {
                            speechOptions = { pitch: 1.0, rate: 1.3, volume: 0.9 };
                        } else if (correctItem.sound.includes('ÙƒÙˆÙƒÙˆ')) {
                            speechOptions = { pitch: 1.4, rate: 1.2, volume: 0.9 };
                        } else if (correctItem.sound.includes('ØªÙŠÙ†')) {
                            speechOptions = { pitch: 1.3, rate: 1.1, volume: 0.7 };
                        } else if (correctItem.sound.includes('Ø¯Ù…')) {
                            speechOptions = { pitch: 0.6, rate: 1.8, volume: 1.0 };
                        } else if (correctItem.sound.includes('ØªØ±ÙŠÙ†')) {
                            speechOptions = { pitch: 1.0, rate: 1.2, volume: 0.8 };
                        } else if (correctItem.sound.includes('Ù„Ø§Ø§Ø§')) {
                            speechOptions = { pitch: 1.6, rate: 0.9, volume: 0.7 };
                        } else if (correctItem.sound.includes('ØªÙŠÙ†Øº')) {
                            speechOptions = { pitch: 1.9, rate: 1.3, volume: 0.8 };
                        }

                        await speak(correctItem.sound, speechOptions);

                        showMessage('ğŸ‘‚ Ø§Ø³ØªÙ…Ø¹ Ø¬ÙŠØ¯Ø§Ù‹ ÙˆØ§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©!');
                    } else {
                        showMessage('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØª', 'error');
                    }
                } catch (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª:', error);
                    showMessage('âŒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª', 'error');
                }

                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø²Ø±
                setTimeout(() => {
                    playBtn.classList.remove('playing');
                    playBtn.innerHTML = 'ğŸ”Š';
                    isPlaying = false;
                }, 1000);
            }

            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
            function selectAnswer(selectedName, cardElement) {
                // Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯
                const allCards = document.querySelectorAll('.card');
                allCards.forEach((card) => (card.style.pointerEvents = 'none'));

                if (selectedName === currentAnswer) {
                    // Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©
                    cardElement.classList.add('correct');
                    score += 10;
                    updateDisplay();

                    showMessage('ğŸ‰ Ù…Ù…ØªØ§Ø²! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! +10 Ù†Ù‚Ø§Ø·', 'success');

                    // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ø¬Ø§Ø­
                    setTimeout(() => {
                        speak('Ø£Ø­Ø³Ù†Øª', { pitch: 1.5, rate: 1.2 });
                    }, 500);

                    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
                    setTimeout(() => {
                        if (currentRound >= 5) {
                            // Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ - Ø§Ù†ØªÙ‚Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ
                            if (currentLevel < 3) {
                                currentLevel++;
                                currentRound = 1;
                                score = 0; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¬Ø¯ÙŠØ¯

                                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
                                document.querySelectorAll('.level-btn').forEach((btn, index) => {
                                    btn.classList.remove('active');
                                    if (index + 1 === currentLevel) {
                                        btn.classList.add('active');
                                    }
                                });

                                updateDisplay();
                                generateRound();
                                showMessage(`ğŸ® Ù…Ø³ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯: ${levels[currentLevel].name} - Ø§Ø¶ØºØ· Ø§Ù„Ø³Ù…Ø§Ø¹Ø©!`);
                            } else {
                                // Ø§Ù†ØªÙ‡Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª - Ø¥Ø¹Ø§Ø¯Ø© Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„
                                currentLevel = 1;
                                currentRound = 1;
                                score = 0;

                                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
                                document.querySelectorAll('.level-btn').forEach((btn, index) => {
                                    btn.classList.remove('active');
                                    if (index === 0) {
                                        btn.classList.add('active');
                                    }
                                });

                                updateDisplay();
                                generateRound();
                                showMessage('ğŸ”„ Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª! Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯', 'success');
                            }
                        } else {
                            // Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                            currentRound++;
                            generateRound();
                            updateDisplay();
                            showMessage(`Ø§Ù„Ø¬ÙˆÙ„Ø© ${currentRound} - Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù…Ø§Ø¹Ø© Ù„Ø³Ù…Ø§Ø¹ Ø§Ù„ØµÙˆØª Ø§Ù„Ø¬Ø¯ÙŠØ¯!`);
                        }

                        // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
                        allCards.forEach((card) => {
                            card.style.pointerEvents = 'auto';
                            card.classList.remove('correct', 'wrong');
                        });
                    }, 2000);
                } else {
                    // Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©
                    cardElement.classList.add('wrong');

                    showMessage(`âŒ Ø®Ø·Ø£! Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ${currentAnswer}`, 'error');

                    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                    allCards.forEach((card) => {
                        const cardText = card.querySelector('.card-text').textContent;
                        if (cardText === currentAnswer) {
                            card.classList.add('correct');
                        }
                    });

                    // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø®Ø·Ø£
                    setTimeout(() => {
                        speak('Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰', { pitch: 0.8, rate: 1.0 });
                    }, 500);

                    // Ø§Ù†ØªÙ‚Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© Ø­ØªÙ‰ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø·Ø£
                    setTimeout(() => {
                        if (currentRound >= 5) {
                            // Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ - Ø§Ù†ØªÙ‚Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ
                            if (currentLevel < 3) {
                                currentLevel++;
                                currentRound = 1;
                                score = 0;

                                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
                                document.querySelectorAll('.level-btn').forEach((btn, index) => {
                                    btn.classList.remove('active');
                                    if (index + 1 === currentLevel) {
                                        btn.classList.add('active');
                                    }
                                });

                                updateDisplay();
                                generateRound();
                                showMessage(`ğŸ® Ù…Ø³ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯: ${levels[currentLevel].name} - Ø§Ø¶ØºØ· Ø§Ù„Ø³Ù…Ø§Ø¹Ø©!`);
                            } else {
                                // Ø§Ù†ØªÙ‡Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª - Ø¥Ø¹Ø§Ø¯Ø© Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„
                                currentLevel = 1;
                                currentRound = 1;
                                score = 0;

                                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
                                document.querySelectorAll('.level-btn').forEach((btn, index) => {
                                    btn.classList.remove('active');
                                    if (index === 0) {
                                        btn.classList.add('active');
                                    }
                                });

                                updateDisplay();
                                generateRound();
                                showMessage('ğŸ”„ Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª! Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯', 'success');
                            }
                        } else {
                            // Ø¬ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                            currentRound++;
                            generateRound();
                            updateDisplay();
                            showMessage(`Ø§Ù„Ø¬ÙˆÙ„Ø© ${currentRound} - Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù…Ø§Ø¹Ø© Ù„Ø³Ù…Ø§Ø¹ Ø§Ù„ØµÙˆØª Ø§Ù„Ø¬Ø¯ÙŠØ¯!`);
                        }

                        // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
                        allCards.forEach((card) => {
                            card.style.pointerEvents = 'auto';
                            card.classList.remove('correct', 'wrong');
                        });
                    }, 2500);
                }
            }

            // Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© - Ù…Ø¨Ø³Ø·Ø© (Ù„Ù† ØªØ³ØªØ®Ø¯Ù… ÙƒØ«ÙŠØ±Ø§Ù‹ Ø§Ù„Ø¢Ù†)
            function nextRound() {
                if (currentRound >= 5) {
                    // Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ
                    if (currentLevel < 3) {
                        currentLevel++;
                        currentRound = 1;
                        score = 0;
                        updateDisplay();
                        generateRound();
                        showMessage(`Ù…Ø³ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯: ${levels[currentLevel].name}`);
                    } else {
                        // Ø¥Ø¹Ø§Ø¯Ø© Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„
                        currentLevel = 1;
                        currentRound = 1;
                        score = 0;
                        updateDisplay();
                        generateRound();
                        showMessage('Ø¨Ø¯Ø§ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©!');
                    }
                } else {
                    currentRound++;
                    generateRound();
                    updateDisplay();
                    showMessage(`Ø§Ù„Ø¬ÙˆÙ„Ø© ${currentRound} - Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù…Ø§Ø¹Ø©!`);
                }
            }

            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
            function showMessage(text, type = '') {
                const message = document.getElementById('message');
                message.textContent = text;
                message.className = `message ${type}`;
            }

            // Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
            document.addEventListener('keydown', function (e) {
                switch (e.key) {
                    case ' ':
                        e.preventDefault();
                        playSound();
                        break;
                    case 't':
                    case 'T':
                        e.preventDefault();
                        testSpeech();
                        break;
                }
            });

            // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
            window.onload = function () {
                console.log('ğŸ® Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„Ø³Ù…Ø¹ÙŠ!');
                generateRound();
                showMessage('ğŸ¤ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµÙˆØª" Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…!');
            };
        </script>
    </body>
</html>

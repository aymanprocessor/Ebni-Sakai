<!doctype html>
<html lang="ar" dir="rtl">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø´Ø·Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Comic Sans MS', cursive, Arial, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
                color: #333;
            }

            .game-container {
                background: white;
                border-radius: 20px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
                padding: 30px;
                max-width: 800px;
                width: 95%;
                text-align: center;
                position: relative;
                overflow: hidden;
            }

            .game-header {
                margin-bottom: 20px;
            }

            .game-title {
                color: #4a5568;
                font-size: 2.5em;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            }

            .game-info {
                display: flex;
                justify-content: space-between;
                align-items: center;
                background: #f7fafc;
                padding: 15px;
                border-radius: 15px;
                margin-bottom: 20px;
                flex-wrap: wrap;
                gap: 10px;
            }

            .level-info,
            .timer,
            .score {
                background: #4299e1;
                color: white;
                padding: 8px 16px;
                border-radius: 20px;
                font-weight: bold;
                font-size: 1.1em;
            }

            .timer {
                background: #f56565;
            }

            .score {
                background: #48bb78;
            }

            .task-instruction {
                background: #fed7d7;
                border: 2px solid #f56565;
                border-radius: 15px;
                padding: 15px;
                margin-bottom: 20px;
                font-size: 1.3em;
                font-weight: bold;
                color: #c53030;
            }

            .game-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
                gap: 15px;
                margin-bottom: 20px;
                background: #f0f8ff;
                padding: 20px;
                border-radius: 15px;
                border: 3px solid #4299e1;
            }

            .game-item {
                width: 80px;
                height: 80px;
                border: 3px solid #e2e8f0;
                border-radius: 15px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 2.5em;
                cursor: pointer;
                background: white;
                transition: all 0.3s ease;
                position: relative;
                user-select: none;
            }

            .game-item:hover {
                transform: scale(1.1);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            }

            .game-item.crossed {
                background: linear-gradient(-45deg, transparent 40%, #f56565 40%, #f56565 60%, transparent 60%);
                opacity: 0.7;
            }

            .game-item.colored {
                animation: colorSuccess 0.5s ease;
            }

            @keyframes colorSuccess {
                0% {
                    background: white;
                }
                50% {
                    background: #68d391;
                    transform: scale(1.2);
                }
                100% {
                    background: #68d391;
                    transform: scale(1);
                }
            }

            .celebration {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 30px;
                border-radius: 20px;
                font-size: 2em;
                font-weight: bold;
                z-index: 1000;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
                animation: celebrate 0.6s ease;
            }

            @keyframes celebrate {
                0% {
                    transform: translate(-50%, -50%) scale(0.5);
                    opacity: 0;
                }
                50% {
                    transform: translate(-50%, -50%) scale(1.2);
                }
                100% {
                    transform: translate(-50%, -50%) scale(1);
                    opacity: 1;
                }
            }

            .control-buttons {
                display: flex;
                gap: 15px;
                justify-content: center;
                flex-wrap: wrap;
            }

            .btn {
                padding: 12px 24px;
                border: none;
                border-radius: 25px;
                font-size: 1.1em;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s ease;
                text-transform: uppercase;
            }

            .btn-start {
                background: #48bb78;
                color: white;
            }

            .btn-restart {
                background: #ed8936;
                color: white;
            }

            .btn-next {
                background: #4299e1;
                color: white;
            }

            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            }

            .confetti {
                position: fixed;
                width: 10px;
                height: 10px;
                background: #f56565;
                animation: confetti-fall 3s linear infinite;
            }

            @keyframes confetti-fall {
                to {
                    transform: translateY(100vh) rotate(360deg);
                }
            }

            .hidden {
                display: none;
            }

            @media (max-width: 600px) {
                .game-container {
                    padding: 20px;
                    margin: 10px;
                }

                .game-title {
                    font-size: 2em;
                }

                .game-item {
                    width: 60px;
                    height: 60px;
                    font-size: 2em;
                }

                .game-grid {
                    grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
                    gap: 10px;
                }
            }
        </style>
    </head>
    <body>
        <div class="game-container">
            <div class="game-header">
                <h1 class="game-title">ğŸ¯ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø´Ø·Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© ğŸ¯</h1>
            </div>

            <div class="game-info">
                <div class="level-info" id="levelInfo">Ø§Ù„Ù…Ø³ØªÙˆÙ‰: 1 - Ù…Ø¨ØªØ¯Ø¦</div>
                <div class="timer" id="timer">Ø§Ù„ÙˆÙ‚Øª: 60</div>
                <div class="score" id="score">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</div>
            </div>

            <div class="task-instruction" id="taskInstruction">Ø§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©" Ù„Ù„Ø¨Ø¯Ø¡!</div>

            <div class="game-grid" id="gameGrid"></div>

            <div class="control-buttons">
                <button class="btn btn-start" id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
                <button class="btn btn-restart hidden" id="restartBtn">Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„</button>
                <button class="btn btn-next hidden" id="nextBtn">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ</button>
            </div>
        </div>

        <script>
            class VisualTrackingGame {
                constructor() {
                    this.currentLevel = 1;
                    this.currentDifficulty = 1; // 1: Ù…Ø¨ØªØ¯Ø¦, 2: Ù…ØªÙˆØ³Ø·, 3: Ø¹Ø§Ù„ÙŠ
                    this.score = 0;
                    this.timeLeft = 60;
                    this.timer = null;
                    this.gameStarted = false;
                    this.targetItems = [];
                    this.foundItems = [];
                    this.completedTargets = []; // Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©
                    this.gameData = [];

                    this.levels = {
                        1: {
                            name: 'Ø£Ø´ÙƒØ§Ù„ ÙˆÙÙˆØ§ÙƒÙ‡ ÙˆØ®Ø¶Ø§Ø±',
                            items: {
                                easy: ['ğŸ', 'ğŸŒ', 'ğŸ¥•', 'ğŸ”´', 'ğŸŸ¢', 'ğŸ”µ', 'ğŸŠ', 'ğŸ¥’'],
                                medium: ['ğŸ', 'ğŸŒ', 'ğŸ¥•', 'ğŸ”´', 'ğŸŸ¢', 'ğŸ”µ', 'ğŸŠ', 'ğŸ¥’', 'ğŸ‡', 'ğŸ¥¬', 'ğŸŸ¡', 'ğŸŸ£'],
                                hard: ['ğŸ', 'ğŸŒ', 'ğŸ¥•', 'ğŸ”´', 'ğŸŸ¢', 'ğŸ”µ', 'ğŸŠ', 'ğŸ¥’', 'ğŸ‡', 'ğŸ¥¬', 'ğŸŸ¡', 'ğŸŸ£', 'ğŸ“', 'ğŸ¥¦', 'ğŸŸ ', 'ğŸŸ¤']
                            },
                            colors: ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd']
                        },
                        2: {
                            name: 'Ø­ÙŠÙˆØ§Ù†Ø§Øª',
                            items: {
                                easy: ['ğŸ±', 'ğŸ¶', 'ğŸ¸', 'ğŸ¦', 'ğŸŸ', 'ğŸ¦†', 'ğŸ·', 'ğŸ°'],
                                medium: ['ğŸ±', 'ğŸ¶', 'ğŸ¸', 'ğŸ¦', 'ğŸŸ', 'ğŸ¦†', 'ğŸ·', 'ğŸ°', 'ğŸ»', 'ğŸ¦', 'ğŸ¯', 'ğŸ¼'],
                                hard: ['ğŸ±', 'ğŸ¶', 'ğŸ¸', 'ğŸ¦', 'ğŸŸ', 'ğŸ¦†', 'ğŸ·', 'ğŸ°', 'ğŸ»', 'ğŸ¦', 'ğŸ¯', 'ğŸ¼', 'ğŸ¨', 'ğŸ¦˜', 'ğŸ¦’', 'ğŸ˜']
                            },
                            colors: ['#ff9ff3', '#54a0ff', '#5f27cd', '#ff6348', '#ff9f43', '#10ac84']
                        },
                        3: {
                            name: 'Ø±Ù…ÙˆØ² ÙˆØ¹Ù„Ø§Ù…Ø§Øª',
                            items: {
                                easy: ['â­', 'â¤ï¸', 'âš¡', 'ğŸ”¥', 'ğŸ’', 'ğŸµ', 'ğŸŒŸ', 'âœ¨'],
                                medium: ['â­', 'â¤ï¸', 'âš¡', 'ğŸ”¥', 'ğŸ’', 'ğŸµ', 'ğŸŒŸ', 'âœ¨', 'ğŸ¯', 'ğŸ­', 'ğŸ¨', 'ğŸ””'],
                                hard: ['â­', 'â¤ï¸', 'âš¡', 'ğŸ”¥', 'ğŸ’', 'ğŸµ', 'ğŸŒŸ', 'âœ¨', 'ğŸ¯', 'ğŸ­', 'ğŸ¨', 'ğŸ””', 'ğŸª', 'ğŸŠ', 'ğŸ‰', 'ğŸ”®']
                            },
                            colors: ['#ff7675', '#74b9ff', '#a29bfe', '#fd79a8', '#fdcb6e', '#6c5ce7']
                        }
                    };

                    this.initializeEventListeners();
                    this.updateDisplay();
                }

                initializeEventListeners() {
                    document.getElementById('startBtn').addEventListener('click', () => this.startGame());
                    document.getElementById('restartBtn').addEventListener('click', () => this.restartGame());
                    document.getElementById('nextBtn').addEventListener('click', () => this.nextLevel());
                }

                startGame() {
                    this.gameStarted = true;
                    this.generateGameData();
                    this.displayGame();
                    this.startTimer();
                    document.getElementById('startBtn').classList.add('hidden');
                    this.playSound('start');
                }

                generateGameData() {
                    const level = this.levels[this.currentLevel];
                    const difficulty = ['easy', 'medium', 'hard'][this.currentDifficulty - 1];
                    const items = level.items[difficulty];

                    // ØªØ­Ø¯ÙŠØ¯ Ø­Ø¬Ù… Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                    const gridSizes = {
                        1: { easy: 16, medium: 24, hard: 32 },
                        2: { easy: 20, medium: 28, hard: 36 },
                        3: { easy: 24, medium: 32, hard: 40 }
                    };

                    const gridSize = gridSizes[this.currentLevel][difficulty];
                    this.gameData = [];

                    if (this.currentLevel === 1) {
                        // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„: Ø¹Ù†ØµØ± ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· Ù…ÙƒØ±Ø± Ø£ÙƒØ«Ø± Ù…Ù† 3 Ù…Ø±Ø§Øª
                        const targetItem = items[Math.floor(Math.random() * items.length)];
                        this.targetItems = [targetItem];

                        // ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù (4-6 Ù…Ø±Ø§Øª)
                        const targetCount = 4 + Math.floor(Math.random() * 3);

                        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù
                        for (let i = 0; i < targetCount; i++) {
                            this.gameData.push(targetItem);
                        }

                        // Ù…Ù„Ø¡ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨Ø¹Ù†Ø§ØµØ± Ø£Ø®Ø±Ù‰
                        const otherItems = items.filter((item) => item !== targetItem);
                        for (let i = targetCount; i < gridSize; i++) {
                            const randomItem = otherItems[Math.floor(Math.random() * otherItems.length)];
                            this.gameData.push(randomItem);
                        }

                        // Ø®Ù„Ø· Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
                        for (let i = this.gameData.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [this.gameData[i], this.gameData[j]] = [this.gameData[j], this.gameData[i]];
                        }
                    } else if (this.currentLevel === 2) {
                        // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø´ÙƒÙ„ÙŠÙ† Ù…ÙƒØ±Ø±ÙŠÙ†ØŒ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†Ø³Ø® Ù„ÙƒÙ„ Ø´ÙƒÙ„
                        const shuffledItems = [...items].sort(() => Math.random() - 0.5);
                        const targetItem1 = shuffledItems[0];
                        const targetItem2 = shuffledItems[1];
                        this.targetItems = [targetItem1, targetItem2];

                        // ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª ØªÙƒØ±Ø§Ø± ÙƒÙ„ Ø¹Ù†ØµØ± (3-5 Ù…Ø±Ø§Øª Ù„ÙƒÙ„ Ø¹Ù†ØµØ±)
                        const targetCount1 = 3 + Math.floor(Math.random() * 3);
                        const targetCount2 = 3 + Math.floor(Math.random() * 3);

                        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©
                        for (let i = 0; i < targetCount1; i++) {
                            this.gameData.push(targetItem1);
                        }
                        for (let i = 0; i < targetCount2; i++) {
                            this.gameData.push(targetItem2);
                        }

                        // Ù…Ù„Ø¡ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨Ø¹Ù†Ø§ØµØ± Ø£Ø®Ø±Ù‰
                        const otherItems = items.filter((item) => item !== targetItem1 && item !== targetItem2);
                        const remainingSlots = gridSize - targetCount1 - targetCount2;
                        for (let i = 0; i < remainingSlots; i++) {
                            const randomItem = otherItems[Math.floor(Math.random() * otherItems.length)];
                            this.gameData.push(randomItem);
                        }

                        // Ø®Ù„Ø· Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
                        for (let i = this.gameData.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [this.gameData[i], this.gameData[j]] = [this.gameData[j], this.gameData[i]];
                        }
                    } else {
                        // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù„Ø«: Ø«Ù„Ø§Ø«Ø© Ø¹Ù†Ø§ØµØ± Ù…ÙƒØ±Ø±Ø©ØŒ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†Ø³Ø® Ù„ÙƒÙ„ Ø¹Ù†ØµØ±
                        const shuffledItems = [...items].sort(() => Math.random() - 0.5);
                        const targetItem1 = shuffledItems[0];
                        const targetItem2 = shuffledItems[1];
                        const targetItem3 = shuffledItems[2];
                        this.targetItems = [targetItem1, targetItem2, targetItem3];

                        // ØªØ­Ø¯ÙŠØ¯ Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª ØªÙƒØ±Ø§Ø± ÙƒÙ„ Ø¹Ù†ØµØ± (3-4 Ù…Ø±Ø§Øª Ù„ÙƒÙ„ Ø¹Ù†ØµØ±)
                        const targetCount1 = 3 + Math.floor(Math.random() * 2);
                        const targetCount2 = 3 + Math.floor(Math.random() * 2);
                        const targetCount3 = 3 + Math.floor(Math.random() * 2);

                        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©
                        for (let i = 0; i < targetCount1; i++) {
                            this.gameData.push(targetItem1);
                        }
                        for (let i = 0; i < targetCount2; i++) {
                            this.gameData.push(targetItem2);
                        }
                        for (let i = 0; i < targetCount3; i++) {
                            this.gameData.push(targetItem3);
                        }

                        // Ù…Ù„Ø¡ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨Ø¹Ù†Ø§ØµØ± Ø£Ø®Ø±Ù‰
                        const otherItems = items.filter((item) => item !== targetItem1 && item !== targetItem2 && item !== targetItem3);
                        const remainingSlots = gridSize - targetCount1 - targetCount2 - targetCount3;
                        for (let i = 0; i < remainingSlots; i++) {
                            const randomItem = otherItems[Math.floor(Math.random() * otherItems.length)];
                            this.gameData.push(randomItem);
                        }

                        // Ø®Ù„Ø· Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
                        for (let i = this.gameData.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [this.gameData[i], this.gameData[j]] = [this.gameData[j], this.gameData[i]];
                        }
                    }

                    this.foundItems = [];
                    this.completedTargets = []; // Ù„ØªØªØ¨Ø¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©
                    this.updateTaskInstruction();
                }

                displayGame() {
                    const gameGrid = document.getElementById('gameGrid');
                    gameGrid.innerHTML = '';

                    this.gameData.forEach((item, index) => {
                        const gameItem = document.createElement('div');
                        gameItem.className = 'game-item';
                        gameItem.innerHTML = item;
                        gameItem.setAttribute('data-index', index);
                        gameItem.addEventListener('click', () => this.handleItemClick(item, gameItem));
                        gameGrid.appendChild(gameItem);
                    });
                }

                handleItemClick(item, element) {
                    if (!this.gameStarted || element.classList.contains('crossed') || element.classList.contains('colored')) {
                        return;
                    }

                    if (this.targetItems.includes(item)) {
                        // Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©
                        element.classList.add('crossed');

                        this.score += 10;
                        this.playSound('correct');
                        this.showCelebration('Ø£Ø­Ø³Ù†Øª! ğŸ‰');

                        // ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„ÙˆØ§Ø­Ø¯
                        if (this.currentLevel === 1) {
                            const targetItem = this.targetItems[0];
                            const totalCount = this.gameData.filter((gameItem) => gameItem === targetItem).length;
                            const foundCount = document.querySelectorAll('.game-item.crossed').length;

                            if (foundCount === totalCount) {
                                this.completeLevel();
                            }
                        }
                        // ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù†Ø³Ø® Ø§Ù„Ø´ÙƒÙ„ÙŠÙ†
                        else if (this.currentLevel === 2) {
                            this.checkLevel2Completion();
                        }
                        // ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù„Ø«: Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù†Ø³Ø® Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ø§Ù„Ø«Ù„Ø§Ø«Ø©
                        else if (this.currentLevel === 3) {
                            this.checkLevel3Completion();
                        }
                    } else {
                        // Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©
                        this.playSound('wrong');
                        element.style.animation = 'shake 0.5s ease';
                        setTimeout(() => {
                            element.style.animation = '';
                        }, 500);
                    }

                    this.updateDisplay();
                }

                checkLevel2Completion() {
                    const target1 = this.targetItems[0];
                    const target2 = this.targetItems[1];

                    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„ÙŠ Ù„ÙƒÙ„ Ø¹Ù†ØµØ± Ù…Ø³ØªÙ‡Ø¯Ù
                    const total1 = this.gameData.filter((item) => item === target1).length;
                    const total2 = this.gameData.filter((item) => item === target2).length;

                    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø·ÙˆØ¨ Ù„ÙƒÙ„ Ø¹Ù†ØµØ±
                    const crossedElements = document.querySelectorAll('.game-item.crossed');
                    let found1 = 0,
                        found2 = 0;

                    crossedElements.forEach((element) => {
                        const itemText = element.textContent.trim();
                        if (itemText === target1) found1++;
                        if (itemText === target2) found2++;
                    });

                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ÙƒØªÙ…Ø§Ù„ ÙƒÙ„ Ø¹Ù†ØµØ±
                    if (found1 === total1 && !this.completedTargets.includes(target1)) {
                        this.completedTargets.push(target1);
                        this.showCelebration(`Ø±Ø§Ø¦Ø¹! ÙˆØ¬Ø¯Øª Ø¬Ù…ÙŠØ¹ ${target1} ğŸ‰`);
                    }

                    if (found2 === total2 && !this.completedTargets.includes(target2)) {
                        this.completedTargets.push(target2);
                        this.showCelebration(`Ù…Ù…ØªØ§Ø²! ÙˆØ¬Ø¯Øª Ø¬Ù…ÙŠØ¹ ${target2} ğŸ‰`);
                    }

                    // Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù†Ø³Ø® Ø§Ù„Ø´ÙƒÙ„ÙŠÙ†
                    if (found1 === total1 && found2 === total2) {
                        this.completeLevel();
                    }
                }

                checkLevel3Completion() {
                    const target1 = this.targetItems[0];
                    const target2 = this.targetItems[1];
                    const target3 = this.targetItems[2];

                    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„ÙŠ Ù„ÙƒÙ„ Ø¹Ù†ØµØ± Ù…Ø³ØªÙ‡Ø¯Ù
                    const total1 = this.gameData.filter((item) => item === target1).length;
                    const total2 = this.gameData.filter((item) => item === target2).length;
                    const total3 = this.gameData.filter((item) => item === target3).length;

                    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø·ÙˆØ¨ Ù„ÙƒÙ„ Ø¹Ù†ØµØ±
                    const crossedElements = document.querySelectorAll('.game-item.crossed');
                    let found1 = 0,
                        found2 = 0,
                        found3 = 0;

                    crossedElements.forEach((element) => {
                        const itemText = element.textContent.trim();
                        if (itemText === target1) found1++;
                        if (itemText === target2) found2++;
                        if (itemText === target3) found3++;
                    });

                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ÙƒØªÙ…Ø§Ù„ ÙƒÙ„ Ø¹Ù†ØµØ±
                    if (found1 === total1 && !this.completedTargets.includes(target1)) {
                        this.completedTargets.push(target1);
                        this.showCelebration(`Ø±Ø§Ø¦Ø¹! ÙˆØ¬Ø¯Øª Ø¬Ù…ÙŠØ¹ ${target1} ğŸ‰`);
                    }

                    if (found2 === total2 && !this.completedTargets.includes(target2)) {
                        this.completedTargets.push(target2);
                        this.showCelebration(`Ù…Ù…ØªØ§Ø²! ÙˆØ¬Ø¯Øª Ø¬Ù…ÙŠØ¹ ${target2} ğŸ‰`);
                    }

                    if (found3 === total3 && !this.completedTargets.includes(target3)) {
                        this.completedTargets.push(target3);
                        this.showCelebration(`Ø¹Ù…Ù„ Ø±Ø§Ø¦Ø¹! ÙˆØ¬Ø¯Øª Ø¬Ù…ÙŠØ¹ ${target3} ğŸ‰`);
                    }

                    // Ø¥Ø°Ø§ ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù†Ø³Ø® Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ø§Ù„Ø«Ù„Ø§Ø«Ø©
                    if (found1 === total1 && found2 === total2 && found3 === total3) {
                        this.completeLevel();
                    }
                }

                isColorItem(item) {
                    const colorItems = ['ğŸ”´', 'ğŸŸ¢', 'ğŸ”µ', 'ğŸŸ¡', 'ğŸŸ£', 'ğŸŸ ', 'ğŸŸ¤'];
                    return colorItems.includes(item);
                }

                completeLevel() {
                    this.gameStarted = false;
                    clearInterval(this.timer);
                    this.score += this.timeLeft * 2; // Ù†Ù‚Ø§Ø· Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
                    this.showCelebration('Ù…Ù…ØªØ§Ø²! Ø¹Ù…Ù„ Ø±Ø§Ø¦Ø¹! ğŸŒŸ');
                    this.playSound('levelComplete');

                    this.createConfetti();

                    // Ø§Ù†ØªÙ‚Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
                    setTimeout(() => {
                        this.autoNextLevel();
                    }, 3000);
                }

                autoNextLevel() {
                    if (this.currentDifficulty < 3) {
                        this.currentDifficulty++;
                        this.showCelebration('Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ... ğŸš€');
                        setTimeout(() => {
                            this.resetGame();
                            this.startGame();
                        }, 1500);
                    } else if (this.currentLevel < 3) {
                        this.currentLevel++;
                        this.currentDifficulty = 1;
                        this.showCelebration('Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©... ğŸ¯');
                        setTimeout(() => {
                            this.resetGame();
                            this.startGame();
                        }, 1500);
                    } else {
                        this.showCelebration('ğŸŠ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø£Ù†Ù‡ÙŠØª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª! ğŸŠ');
                        setTimeout(() => {
                            document.getElementById('restartBtn').classList.remove('hidden');
                        }, 2000);
                    }
                }

                nextLevel() {
                    if (this.currentDifficulty < 3) {
                        this.currentDifficulty++;
                    } else if (this.currentLevel < 3) {
                        this.currentLevel++;
                        this.currentDifficulty = 1;
                    } else {
                        this.showCelebration('ğŸŠ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø£Ù†Ù‡ÙŠØª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª! ğŸŠ');
                        return;
                    }

                    this.resetGame();
                    this.startGame();
                }

                restartGame() {
                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒØ§Ù…Ù„ Ù„Ù„Ø¹Ø¨Ø©
                    this.currentLevel = 1;
                    this.currentDifficulty = 1;
                    this.score = 0;
                    this.resetGame();
                    document.getElementById('startBtn').classList.remove('hidden');
                }

                resetGame() {
                    this.gameStarted = false;
                    clearInterval(this.timer);
                    this.timeLeft = 60;
                    this.foundItems = [];
                    this.targetItems = [];
                    this.completedTargets = [];
                    document.getElementById('gameGrid').innerHTML = '';
                    document.getElementById('nextBtn').classList.add('hidden');
                    document.getElementById('restartBtn').classList.add('hidden');
                    this.updateDisplay();
                    this.updateTaskInstruction();
                }

                startTimer() {
                    this.timer = setInterval(() => {
                        this.timeLeft--;
                        this.updateDisplay();

                        if (this.timeLeft <= 0) {
                            this.gameOver();
                        }
                    }, 1000);
                }

                gameOver() {
                    this.gameStarted = false;
                    clearInterval(this.timer);
                    this.showCelebration('Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! ğŸ•');
                    this.playSound('timeUp');

                    // Ø§Ù†ØªÙ‚Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
                    setTimeout(() => {
                        this.showCelebration('Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰... ğŸ”„');
                        setTimeout(() => {
                            this.resetGame();
                            this.startGame();
                        }, 1500);
                    }, 3000);
                }

                updateDisplay() {
                    const difficultyNames = ['Ù…Ø¨ØªØ¯Ø¦', 'Ù…ØªÙˆØ³Ø·', 'Ø¹Ø§Ù„ÙŠ'];
                    const levelName = this.levels[this.currentLevel].name;

                    document.getElementById('levelInfo').textContent = `Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${this.currentLevel}: ${levelName} - ${difficultyNames[this.currentDifficulty - 1]}`;
                    document.getElementById('timer').textContent = `Ø§Ù„ÙˆÙ‚Øª: ${this.timeLeft}`;
                    document.getElementById('score').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${this.score}`;
                }

                updateTaskInstruction() {
                    if (this.targetItems.length > 0) {
                        if (this.currentLevel === 1) {
                            const targetItem = this.targetItems[0];
                            const itemNames = {
                                'ğŸ': 'Ø§Ù„ØªÙØ§Ø­Ø©',
                                'ğŸŒ': 'Ø§Ù„Ù…ÙˆØ²Ø©',
                                'ğŸ¥•': 'Ø§Ù„Ø¬Ø²Ø±Ø©',
                                'ğŸ”´': 'Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡',
                                'ğŸŸ¢': 'Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡',
                                'ğŸ”µ': 'Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡',
                                'ğŸŠ': 'Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„Ø©',
                                'ğŸ¥’': 'Ø§Ù„Ø®ÙŠØ§Ø±Ø©',
                                'ğŸ‡': 'Ø§Ù„Ø¹Ù†Ø¨',
                                'ğŸ¥¬': 'Ø§Ù„Ø®Ø³',
                                'ğŸŸ¡': 'Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„ØµÙØ±Ø§Ø¡',
                                'ğŸŸ£': 'Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ù†ÙØ³Ø¬ÙŠØ©',
                                'ğŸ“': 'Ø§Ù„ÙØ±Ø§ÙˆÙ„Ø©',
                                'ğŸ¥¦': 'Ø§Ù„Ø¨Ø±ÙˆÙƒÙ„ÙŠ',
                                'ğŸŸ ': 'Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠØ©',
                                'ğŸŸ¤': 'Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¨Ù†ÙŠØ©'
                            };
                            const itemName = itemNames[targetItem] || targetItem;
                            document.getElementById('taskInstruction').innerHTML = `Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù…ÙŠØ¹ ${targetItem} (${itemName}) ÙˆØ§Ø´Ø·Ø¨Ù‡Ø§ Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡Ø§`;
                        } else if (this.currentLevel === 2) {
                            const target1 = this.targetItems[0];
                            const target2 = this.targetItems[1];
                            const animalNames = {
                                'ğŸ±': 'Ø§Ù„Ù‚Ø·Ø©',
                                'ğŸ¶': 'Ø§Ù„ÙƒÙ„Ø¨',
                                'ğŸ¸': 'Ø§Ù„Ø¶ÙØ¯Ø¹',
                                'ğŸ¦': 'Ø§Ù„Ø¹ØµÙÙˆØ±',
                                'ğŸŸ': 'Ø§Ù„Ø³Ù…ÙƒØ©',
                                'ğŸ¦†': 'Ø§Ù„Ø¨Ø·Ø©',
                                'ğŸ·': 'Ø§Ù„Ø®Ù†Ø²ÙŠØ±',
                                'ğŸ°': 'Ø§Ù„Ø£Ø±Ù†Ø¨',
                                'ğŸ»': 'Ø§Ù„Ø¯Ø¨',
                                'ğŸ¦': 'Ø§Ù„Ø£Ø³Ø¯',
                                'ğŸ¯': 'Ø§Ù„Ù†Ù…Ø±',
                                'ğŸ¼': 'Ø§Ù„Ø¨Ø§Ù†Ø¯Ø§',
                                'ğŸ¨': 'Ø§Ù„ÙƒÙˆØ§Ù„Ø§',
                                'ğŸ¦˜': 'Ø§Ù„ÙƒÙ†ØºØ±',
                                'ğŸ¦’': 'Ø§Ù„Ø²Ø±Ø§ÙØ©',
                                'ğŸ˜': 'Ø§Ù„ÙÙŠÙ„'
                            };
                            const name1 = animalNames[target1] || target1;
                            const name2 = animalNames[target2] || target2;
                            document.getElementById('taskInstruction').innerHTML = `Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù…ÙŠØ¹ ${target1} (${name1}) ÙˆØ¬Ù…ÙŠØ¹ ${target2} (${name2}) ÙˆØ§Ø´Ø·Ø¨Ù‡Ø§`;
                        } else if (this.currentLevel === 3) {
                            const target1 = this.targetItems[0];
                            const target2 = this.targetItems[1];
                            const target3 = this.targetItems[2];
                            const symbolNames = {
                                'â­': 'Ø§Ù„Ù†Ø¬Ù…Ø©',
                                'â¤ï¸': 'Ø§Ù„Ù‚Ù„Ø¨',
                                'âš¡': 'Ø§Ù„Ø¨Ø±Ù‚',
                                'ğŸ”¥': 'Ø§Ù„Ù†Ø§Ø±',
                                'ğŸ’': 'Ø§Ù„Ù…Ø§Ø³Ø©',
                                'ğŸµ': 'Ø§Ù„Ù†ÙˆØªØ© Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚ÙŠØ©',
                                'ğŸŒŸ': 'Ø§Ù„Ù†Ø¬Ù…Ø© Ø§Ù„Ù…Ø¶ÙŠØ¦Ø©',
                                'âœ¨': 'Ø§Ù„Ø¨Ø±ÙŠÙ‚',
                                'ğŸ¯': 'Ø§Ù„Ù‡Ø¯Ù',
                                'ğŸ­': 'Ø§Ù„Ù‚Ù†Ø§Ø¹',
                                'ğŸ¨': 'Ø§Ù„ÙØ±Ø´Ø§Ø©',
                                'ğŸ””': 'Ø§Ù„Ø¬Ø±Ø³',
                                'ğŸª': 'Ø§Ù„Ø³ÙŠØ±Ùƒ',
                                'ğŸŠ': 'Ø§Ù„Ø§Ø­ØªÙØ§Ù„',
                                'ğŸ‰': 'Ø§Ù„Ø­ÙÙ„Ø©',
                                'ğŸ”®': 'Ø§Ù„ÙƒØ±Ø© Ø§Ù„Ø¨Ù„ÙˆØ±ÙŠØ©'
                            };
                            const name1 = symbolNames[target1] || target1;
                            const name2 = symbolNames[target2] || target2;
                            const name3 = symbolNames[target3] || target3;
                            document.getElementById('taskInstruction').innerHTML = `Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù…ÙŠØ¹ ${target1} (${name1}) ÙˆØ¬Ù…ÙŠØ¹ ${target2} (${name2}) ÙˆØ¬Ù…ÙŠØ¹ ${target3} (${name3}) ÙˆØ§Ø´Ø·Ø¨Ù‡Ø§`;
                        }
                    } else {
                        document.getElementById('taskInstruction').textContent = 'Ø§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©" Ù„Ù„Ø¨Ø¯Ø¡!';
                    }
                }

                showCelebration(message) {
                    const celebration = document.createElement('div');
                    celebration.className = 'celebration';
                    celebration.textContent = message;
                    document.body.appendChild(celebration);

                    setTimeout(() => {
                        document.body.removeChild(celebration);
                    }, 2000);
                }

                createConfetti() {
                    const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd'];

                    for (let i = 0; i < 20; i++) {
                        setTimeout(() => {
                            const confetti = document.createElement('div');
                            confetti.className = 'confetti';
                            confetti.style.left = Math.random() * 100 + 'vw';
                            confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                            confetti.style.animationDelay = Math.random() * 3 + 's';
                            document.body.appendChild(confetti);

                            setTimeout(() => {
                                if (document.body.contains(confetti)) {
                                    document.body.removeChild(confetti);
                                }
                            }, 3000);
                        }, i * 100);
                    }
                }

                playSound(type) {
                    // Ø¥Ù†Ø´Ø§Ø¡ Ø£ØµÙˆØ§Øª Ø¨Ø³ÙŠØ·Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Web Audio API
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();

                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);

                    let frequency, duration;

                    switch (type) {
                        case 'correct':
                            frequency = 800;
                            duration = 0.2;
                            break;
                        case 'wrong':
                            frequency = 200;
                            duration = 0.3;
                            break;
                        case 'levelComplete':
                            frequency = 600;
                            duration = 0.5;
                            break;
                        case 'start':
                            frequency = 400;
                            duration = 0.3;
                            break;
                        case 'timeUp':
                            frequency = 150;
                            duration = 1;
                            break;
                        default:
                            frequency = 400;
                            duration = 0.2;
                    }

                    oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + duration);
                }
            }

            // Ø¥Ø¶Ø§ÙØ© CSS Ù„Ù„Ø§Ù‡ØªØ²Ø§Ø²
            const style = document.createElement('style');
            style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
        `;
            document.head.appendChild(style);

            // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
            const game = new VisualTrackingGame();
        </script>
    </body>
</html>
